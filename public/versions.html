<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <script src="//cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  </head>
  <body>
    <div id="charts"></div>
  </body>
  <script>

  $.getJSON("versions.json", function(data) {
    data = data.map(function (e) {
      e.versionCount = Object.values(e.versions).length;
      return e;
    }).sort(function (a, b) {
      return b.versionCount - a.versionCount;
    })

    data.forEach(function (e, i) {
      $("#charts").append("<div class='chart-" + i + "' style='height: 80px;' />");

      var versions = Object.values(e.versions).map(function (x) { return [x] })

      new Chartist.Bar(".chart-" + i, {
        labels: [e.gem_name],
        series: versions
      }, {
        seriesBarDistance: 0,
        high: 50,
        reverseData: true,
        horizontalBars: true,
        stackBars: true,
        axisY: {
          offset: 100
        }
      });
    })

  })
  </script>
</html>
